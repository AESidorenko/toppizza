(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{ng4s:function(t,e,n){"use strict";n.r(e);n("wLYn"),n("eoL8"),n("XENs"),n("SYky");var r=n("q1tI"),o=n.n(r),a=n("i8i4"),i=n.n(a),c=(n("pNMO"),n("4Brf"),n("0oug"),n("yyme"),n("4mDm"),n("2B1R"),n("DQNa"),n("uL8W"),n("NBAS"),n("ExoC"),n("07d7"),n("SuFq"),n("JfAA"),n("PKPk"),n("3bBZ"),n("vDqi")),u=n.n(c),s=n("2oG/"),l=n("wHSu"),f=n("IP2g");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(i,t);var e,n,r,a=y(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={itemCount:t.itemCount},e.handleClickAddToCart=e.handleClickAddToCart.bind(b(e)),e.handleClickRemoveFromCart=e.handleClickRemoveFromCart.bind(b(e)),e}return e=i,(n=[{key:"handleClickAddToCart",value:function(t){this.setState((function(t){return{itemCount:t.itemCount+1}}),(function(){this.props.onCountChanged(this.props.item.id,this.state.itemCount)}))}},{key:"handleClickRemoveFromCart",value:function(t){this.setState((function(t){return{itemCount:t.itemCount>0?t.itemCount-1:0}}),(function(){this.props.onCountChanged(this.props.item.id,this.state.itemCount)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"card mb-4"},o.a.createElement("div",{className:"thumbnail-container"},o.a.createElement("img",{className:"card-img-top thumbnail",src:"https://img.pizza/350/250?"+this.props.item.id.toString(),alt:"Card image cap"})),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",{className:"card-text"},this.props.item.title),o.a.createElement("hr",null),o.a.createElement("p",{className:"text-secondary"},o.a.createElement("small",null,this.props.item.description))),o.a.createElement("div",{className:"card-footer text-center"},0===this.state.itemCount?o.a.createElement("button",{className:"btn btn-danger btn-add-to-cart btn-sm",id:"add-to-cart-"+this.props.item.id.toString(),onClick:this.handleClickAddToCart},"Add to cart +",s.a.currencyStringRule(this.props.item.price,this.props.currencyCode)):o.a.createElement("div",{className:"text-center"},o.a.createElement("button",{className:"btn btn-secondary btn-remove-from-cart float-left btn-sm",id:"remove-from-cart-"+this.props.item.id.toString(),onClick:this.handleClickRemoveFromCart},o.a.createElement(f.a,{icon:l.a})),o.a.createElement("span",{className:"w-100 text-center"},"x",this.state.itemCount),o.a.createElement("button",{className:"btn btn-danger btn-add-to-cart float-right btn-sm",id:"add-to-cart-"+this.props.item.id.toString(),onClick:this.handleClickAddToCart},"+",s.a.currencyStringRule(this.props.item.price,this.props.currencyCode)))))}}])&&p(e.prototype,n),r&&p(e,r),i}(r.Component);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(i,t);var e,n,r,a=w(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={items:[],loading:!0,currencyCode:t.currencyCode},e.itemRefs=[],e.loadItems=e.loadItems.bind(k(e)),e.setCurrencyCode=e.setCurrencyCode.bind(k(e)),e}return e=i,(n=[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"loadItems",value:function(){var t=this;u.a.get("/api/menu").then((function(e){t.itemRefs=Array(e.data.length).fill(null).map((function(){return o.a.createRef()})),t.setState({items:e.data,loading:!1})}))}},{key:"setCurrencyCode",value:function(t){this.setState({currencyCode:t})}},{key:"render",value:function(){var t=this;return console.log("Menu re-render"),o.a.createElement("div",null,this.state.loading?o.a.createElement("div",{className:"spinner-border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")):o.a.createElement("div",{className:"row"},this.state.items.map((function(e,n){var r;return o.a.createElement("div",{className:"col-12 col-xs-6 col-sm-4",key:e.id},o.a.createElement(v,{item:e,itemCount:null!==(r=t.props.cart.get(e.id))&&void 0!==r?r:0,onCountChanged:t.props.onItemCountChanged,currencyCode:t.state.currencyCode,ref:t.itemRefs[n]}))}),this)))}}])&&E(e.prototype,n),r&&E(e,r),i}(r.Component);n("pjDv"),n("J30X"),n("E9XD"),n("+2oP"),n("sMBO");function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=M(t);if(e){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(i,t);var e,n,r,a=A(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={itemsTotal:N(e.props.cart).reduce((function(t,e){return t+e[1]}),0)},e.updateFromCart=e.updateFromCart.bind(D(e)),e}return e=i,(n=[{key:"handleToCart",value:function(){window.location="/cart"}},{key:"updateFromCart",value:function(){this.setState({itemsTotal:N(this.props.cart).reduce((function(t,e){return t+e[1]}),0)})}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.itemsTotal>0?o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleToCart},"Items in cart: ",o.a.createElement("span",{className:"badge badge-warning"},this.state.itemsTotal)):o.a.createElement("button",{type:"button",className:"btn btn-outline-danger disabled"},"Cart empty"))}}])&&I(e.prototype,n),r&&I(e,r),i}(r.Component),B=n("lya3"),L=n("VO4U");function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MenuElement=null,this.cartStorage=new B.a,this.currencyCode=this.cartStorage.getCurrency(),this.cartStorage.load(),this.handleItemCountChanged=this.handleItemCountChanged.bind(this),this.handleCurrencyChange=this.handleCurrencyChange.bind(this)}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e,n){this.cartStorage.touch(),this.cartStorage.getIdempotencyKey(),this.MiniCartElement=o.a.createElement(F,{cart:this.cartStorage.cart}),this.CurrnecyElement=o.a.createElement(L.a,{value:this.currencyCode,onChange:this.handleCurrencyChange}),this.MenuElement=o.a.createElement(R,{cart:this.cartStorage.cart,onItemCountChanged:this.handleItemCountChanged,currencyCode:this.currencyCode}),i.a.render(this.CurrnecyElement,document.getElementById(n)),this.MenuObject=i.a.render(this.MenuElement,document.getElementById(t)),this.miniCartObject=i.a.render(this.MiniCartElement,document.getElementById(e))}},{key:"handleCurrencyChange",value:function(t){this.cartStorage.setCurrency(t),this.currencyCode=t,this.MenuObject.setCurrencyCode(t)}},{key:"handleItemCountChanged",value:function(t,e){this.cartStorage.cart.set(t,e>0?e:0),this.saveCart()}},{key:"saveCart",value:function(){this.cartStorage.save(),this.miniCartObject.updateFromCart()}}])&&J(e.prototype,n),r&&J(e,r),t}());document.addEventListener("DOMContentLoaded",(function(){q.init("menu","mini-cart","currency-container")}));e.default=q}},[["ng4s","runtime",0,1]]]);