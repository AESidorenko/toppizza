(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"2oG/":function(t,e,n){"use strict";n("DQNa"),n("wLYn"),n("toAj"),n("eoL8"),n("07d7"),n("rNhl"),n("JfAA");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currencyRate=1.18,this.currencyStringRule=this.currencyStringRule.bind(this)}var e,n,o;return e=t,(n=[{key:"currencyStringRule",value:function(t,e){return("EUR"===e?"â‚¬":"$")+(("EUR"===e?1:this.currencyRate)*parseFloat(t)).toFixed(2).toString()}}])&&r(e.prototype,n),o&&r(e,o),t}());e.a=o},VO4U:function(t,e,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("DQNa"),n("wLYn"),n("uL8W"),n("eoL8"),n("NBAS"),n("ExoC"),n("07d7"),n("SuFq"),n("JfAA"),n("PKPk"),n("3bBZ");var r=n("q1tI"),o=n.n(r);n("IP2g");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(s,t);var e,n,r,a=u(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).state={value:t.value},e.setCurrency=e.setCurrency.bind(l(e)),e}return e=s,(n=[{key:"setCurrency",value:function(t){this.setState({value:t}),this.props.onChange(t)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("a",{type:"link",onClick:function(){return t.setCurrency("EUR")},className:"currency "+("EUR"===this.state.value?"currency-active":"")},"EUR"),o.a.createElement("a",{type:"link",onClick:function(){return t.setCurrency("USD")},className:"currency "+("USD"===this.state.value?"currency-active":"")},"USD"))}}])&&i(e.prototype,n),r&&i(e,r),s}(r.Component);e.a=y},XENs:function(t,e,n){},lya3:function(t,e,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("pjDv"),n("J30X"),n("4mDm"),n("+2oP"),n("brp2"),n("DQNa"),n("wLYn"),n("sMBO"),n("Tskq"),n("eoL8"),n("07d7"),n("JfAA"),n("PKPk"),n("3bBZ");function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cart=new Map,this.save=this.save.bind(this),this.exists=this.exists.bind(this),this.touch=this.touch.bind(this),this.reset=this.reset.bind(this),this.updateIdempotencyKey=this.updateIdempotencyKey.bind(this)}var e,n,o;return e=t,(n=[{key:"load",value:function(){var t=localStorage.getItem("cartItems");this.cart=null===t?new Map:new Map(JSON.parse(t))}},{key:"save",value:function(){localStorage.setItem("cartItems",JSON.stringify(r(this.cart))),localStorage.setItem("cartUpdated",Date.now().toString())}},{key:"exists",value:function(){return null!==localStorage.getItem("cartItems")}},{key:"touch",value:function(){this.exists()?localStorage.setItem("cartUpdated",Date.now().toString()):this.reset()}},{key:"reset",value:function(){this.cart.clear(),this.save()}},{key:"updateIdempotencyKey",value:function(){var t=this.generateIdempotencyKey();return localStorage.setItem("idempotencyKey",t),t}},{key:"generateIdempotencyKey",value:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,r=0;r<16;r++)t+=e.charAt(Math.floor(Math.random()*n));return t}},{key:"getIdempotencyKey",value:function(){var t;return null!==(t=localStorage.getItem("idempotencyKey"))&&void 0!==t?t:this.updateIdempotencyKey()}},{key:"setCurrency",value:function(t){localStorage.setItem("currencyCode",t)}},{key:"getCurrency",value:function(){var t;return null!==(t=localStorage.getItem("currencyCode"))&&void 0!==t?t:"EUR"}}])&&a(e.prototype,n),o&&a(e,o),t}();e.a=i},ng4s:function(t,e,n){"use strict";n.r(e);n("wLYn"),n("eoL8"),n("XENs"),n("SYky");var r=n("q1tI"),o=n.n(r),a=n("i8i4"),i=n.n(a),c=(n("pNMO"),n("4Brf"),n("0oug"),n("yyme"),n("4mDm"),n("2B1R"),n("DQNa"),n("uL8W"),n("NBAS"),n("ExoC"),n("07d7"),n("SuFq"),n("JfAA"),n("PKPk"),n("3bBZ"),n("vDqi")),u=n.n(c),s=n("2oG/");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(i,t);var e,n,r,a=p(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={itemCount:t.itemCount},e.handleClickAddToCart=e.handleClickAddToCart.bind(h(e)),e.handleClickRemoveFromCart=e.handleClickRemoveFromCart.bind(h(e)),e}return e=i,(n=[{key:"handleClickAddToCart",value:function(t){this.setState((function(t){return{itemCount:t.itemCount+1}}),(function(){this.props.onCountChanged(this.props.item.id,this.state.itemCount)}))}},{key:"handleClickRemoveFromCart",value:function(t){this.setState((function(t){return{itemCount:t.itemCount>0?t.itemCount-1:0}}),(function(){this.props.onCountChanged(this.props.item.id,this.state.itemCount)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"card mb-4"},o.a.createElement("img",{className:"card-img-top",src:"https://img.pizza/350/250?"+this.props.item.id.toString(),alt:"Card image cap"}),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",{className:"card-text"},this.props.item.title),o.a.createElement("hr",null),o.a.createElement("p",{className:"text-secondary"},o.a.createElement("small",null,this.props.item.description))),o.a.createElement("div",{className:"card-footer text-center"},0===this.state.itemCount?o.a.createElement("button",{className:"btn btn-danger btn-add-to-cart btn-sm",id:"add-to-cart-"+this.props.item.id.toString(),onClick:this.handleClickAddToCart},"Add to cart +",s.a.currencyStringRule(this.props.item.price,this.props.currencyCode)):o.a.createElement("div",{className:"text-center"},o.a.createElement("button",{className:"btn btn-secondary btn-remove-from-cart float-left btn-sm",id:"remove-from-cart-"+this.props.item.id.toString(),onClick:this.handleClickRemoveFromCart},"-"),o.a.createElement("span",{className:"w-100 text-center"},"x",this.state.itemCount),o.a.createElement("button",{className:"btn btn-danger btn-add-to-cart float-right btn-sm",id:"add-to-cart-"+this.props.item.id.toString(),onClick:this.handleClickAddToCart},"+",s.a.currencyStringRule(this.props.item.price,this.props.currencyCode)))))}}])&&f(e.prototype,n),r&&f(e,r),i}(r.Component);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?E(t):e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,t);var e,n,r,a=S(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={items:[],loading:!0,currencyCode:t.currencyCode},e.itemRefs=[],e.loadItems=e.loadItems.bind(E(e)),e.setCurrencyCode=e.setCurrencyCode.bind(E(e)),e}return e=i,(n=[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"loadItems",value:function(){var t=this;u.a.get("/api/menu").then((function(e){t.itemRefs=Array(e.data.length).fill(null).map((function(){return o.a.createRef()})),t.setState({items:e.data,loading:!1})}))}},{key:"setCurrencyCode",value:function(t){this.setState({currencyCode:t})}},{key:"render",value:function(){var t=this;return console.log("Menu re-render"),o.a.createElement("div",null,this.state.loading?o.a.createElement("div",{className:"spinner-border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")):o.a.createElement("div",{className:"row"},this.state.items.map((function(e,n){var r;return o.a.createElement("div",{className:"col-12 col-xs-6 col-sm-4",key:e.id},o.a.createElement(b,{item:e,itemCount:null!==(r=t.props.cart.get(e.id))&&void 0!==r?r:0,onCountChanged:t.props.onItemCountChanged,currencyCode:t.state.currencyCode,ref:t.itemRefs[n]}))}),this)))}}])&&C(e.prototype,n),r&&C(e,r),i}(r.Component);n("pjDv"),n("J30X"),n("E9XD"),n("+2oP"),n("sMBO");function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T(t);if(e){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(i,t);var e,n,r,a=A(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={itemsTotal:R(e.props.cart).reduce((function(t,e){return t+e[1]}),0)},e.updateFromCart=e.updateFromCart.bind(D(e)),e}return e=i,(n=[{key:"handleToCart",value:function(){window.location="/cart"}},{key:"updateFromCart",value:function(){this.setState({itemsTotal:R(this.props.cart).reduce((function(t,e){return t+e[1]}),0)})}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.itemsTotal>0?o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleToCart},"Items in cart: ",o.a.createElement("span",{className:"badge badge-warning"},this.state.itemsTotal)):o.a.createElement("button",{type:"button",className:"btn btn-outline-danger disabled"},"Cart empty"))}}])&&P(e.prototype,n),r&&P(e,r),i}(r.Component),M=n("lya3"),U=n("VO4U");function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var K=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MenuElement=null,this.cartStorage=new M.a,this.currencyCode=this.cartStorage.getCurrency(),this.cartStorage.load(),this.handleItemCountChanged=this.handleItemCountChanged.bind(this),this.handleCurrencyChange=this.handleCurrencyChange.bind(this)}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e,n){this.cartStorage.touch(),this.cartStorage.getIdempotencyKey(),this.MiniCartElement=o.a.createElement(x,{cart:this.cartStorage.cart}),this.CurrnecyElement=o.a.createElement(U.a,{value:this.currencyCode,onChange:this.handleCurrencyChange}),this.MenuElement=o.a.createElement(k,{cart:this.cartStorage.cart,onItemCountChanged:this.handleItemCountChanged,currencyCode:this.currencyCode}),i.a.render(this.CurrnecyElement,document.getElementById(n)),this.MenuObject=i.a.render(this.MenuElement,document.getElementById(t)),this.miniCartObject=i.a.render(this.MiniCartElement,document.getElementById(e))}},{key:"handleCurrencyChange",value:function(t){this.cartStorage.setCurrency(t),this.currencyCode=t,this.MenuObject.setCurrencyCode(t)}},{key:"handleItemCountChanged",value:function(t,e){this.cartStorage.cart.set(t,e>0?e:0),this.saveCart()}},{key:"saveCart",value:function(){this.cartStorage.save(),this.miniCartObject.updateFromCart()}}])&&B(e.prototype,n),r&&B(e,r),t}());document.addEventListener("DOMContentLoaded",(function(){K.init("menu","mini-cart","currency-container")}));e.default=K}},[["ng4s","runtime",0]]]);